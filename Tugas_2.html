
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Deteksi Outlier &#8212; Penambangan Data</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- So that users can add custom icons -->
  <script src="_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'Tugas_2';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Penjelasan Deteksi Outlier" href="AKURASI.html" />
    <link rel="prev" title="Data Understanding" href="tugas1.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/logo.jpeg" class="logo__image only-light" alt="Penambangan Data - Home"/>
    <img src="_static/logo.jpeg" class="logo__image only-dark pst-js-only" alt="Penambangan Data - Home"/>
  
  
</a></div>
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    Penambangan Data
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="tugas1.html">Data Understanding</a></li>
<li class="toctree-l1 current active has-children"><a class="current reference internal" href="#">Deteksi Outlier</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="AKURASI.html">Penjelasan Deteksi Outlier</a></li>

</ul>
</details></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2FTugas_2.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/Tugas_2.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Deteksi Outlier</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#penjelasan-deteksi-outlier">Penjelasan Deteksi Outlier</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#identifikasi-outlier-menggunakan-k-nearest-neighbors-knn-dalam-pemahaman-data">Identifikasi Outlier Menggunakan K-Nearest Neighbors (KNN) dalam Pemahaman Data</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#deteksi-outlier-dengan-metode-local-outlier-factor-lof-dalam-data-understanding"><strong>Deteksi Outlier dengan metode Local Outlier Factor (LOF) dalam Data Understanding</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apa-itu-lof">APA ITU LOF</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bagaimana-tahapan-lof">BAGAIMANA TAHAPAN LOF</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#contoh-menghitung-manual-lof">CONTOH MENGHITUNG MANUAL LOF</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#implementasi-pakai-sklearn-untuk-data-contoh">IMPLEMENTASI PAKAI SKLEARN UNTUK DATA CONTOH</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="deteksi-outlier">
<h1>Deteksi Outlier<a class="headerlink" href="#deteksi-outlier" title="Link to this heading">#</a></h1>
<section id="penjelasan-deteksi-outlier">
<h2>Penjelasan Deteksi Outlier<a class="headerlink" href="#penjelasan-deteksi-outlier" title="Link to this heading">#</a></h2>
<section id="identifikasi-outlier-menggunakan-k-nearest-neighbors-knn-dalam-pemahaman-data">
<h3>Identifikasi Outlier Menggunakan K-Nearest Neighbors (KNN) dalam Pemahaman Data<a class="headerlink" href="#identifikasi-outlier-menggunakan-k-nearest-neighbors-knn-dalam-pemahaman-data" title="Link to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>Apa yang Dimaksud dengan Deteksi Outlier?</p></li>
</ol>
<p>Outlier merujuk pada data yang secara signifikan berbeda dari data lainnya dalam suatu dataset. Keberadaan outlier bisa disebabkan oleh berbagai faktor seperti kesalahan pengukuran, kesalahan input, atau memang data tersebut memiliki karakteristik unik dibandingkan data lainnya. Outlier dapat mempengaruhi hasil analisis dan performa model machine learning. Oleh karena itu, deteksi outlier diperlukan untuk mengidentifikasi data yang menyimpang dari pola umum.</p>
<ol class="arabic simple" start="2">
<li><p>Mengapa KNN Digunakan dalam Deteksi Outlier?</p></li>
</ol>
<p>K-Nearest Neighbors (KNN) bekerja berdasarkan kedekatan antar data, sehingga dapat dimanfaatkan untuk mengidentifikasi outlier dengan mengukur jarak antara satu titik data dan tetangga terdekatnya.</p>
<p>Beberapa prinsip utama yang digunakan dalam deteksi outlier dengan KNN adalah:</p>
<p>Jika suatu titik data memiliki sedikit tetangga dalam radius tertentu, kemungkinan besar data tersebut merupakan outlier.
Jika rata-rata jarak ke k tetangga terdekatnya sangat besar, maka data tersebut dapat dikategorikan sebagai outlier.
3. Langkah-Langkah Deteksi Outlier Menggunakan KNN</p>
<p>a. Menghitung Jarak Antar Titik Data</p>
<p>Jarak antara satu titik dengan lainnya dapat diukur menggunakan metrik seperti Euclidean Distance, Manhattan Distance, atau Minkowski Distance.</p>
<p>b. Menentukan Nilai K (Jumlah Tetangga Terdekat)</p>
<p>Jumlah tetangga yang dipilih akan mempengaruhi hasil deteksi outlier:</p>
<p>Nilai K yang terlalu kecil bisa membuat model terlalu sensitif terhadap noise.
Nilai K yang terlalu besar dapat mengurangi akurasi dalam mendeteksi outlier.</p>
<p>c. Mengukur Skor Kepadatan (Density Score)</p>
<p>Ada beberapa cara untuk menentukan apakah suatu titik adalah outlier, antara lain:</p>
<p>K-Nearest Neighbor Distance
Menghitung rata-rata jarak ke K tetangga terdekat. Jika nilai ini terlalu besar, maka titik tersebut bisa dianggap outlier.
Local Outlier Factor (LOF)
LOF membandingkan kepadatan lokal suatu titik dengan kepadatan lokal tetangganya. Jika kepadatan suatu titik jauh lebih rendah dibandingkan tetangganya, maka titik tersebut dapat diklasifikasikan sebagai outlier.
Distance-Based Outlier Score
Jika sebuah titik memiliki jumlah tetangga yang sangat sedikit dalam radius tertentu, maka kemungkinan besar titik tersebut adalah outlier.
4. Kelebihan dan Kekurangan KNN dalam Deteksi Outlier
Kelebihan:</p>
<p>Konsepnya mudah dipahami karena berbasis jarak.
Tidak bergantung pada distribusi data tertentu, sehingga fleksibel untuk berbagai dataset.
Dapat diterapkan pada data dengan dimensi tinggi.
Kekurangan:</p>
<p>Memerlukan komputasi yang tinggi, terutama jika dataset berukuran besar karena perlu menghitung jarak antar banyak titik.
Sensitif terhadap pemilihan nilai K, sehingga pemilihan yang tidak tepat dapat mengurangi efektivitas deteksi outlier.
Kesimpulan
Metode KNN dapat dimanfaatkan dalam proses pemahaman data untuk mendeteksi outlier dengan mengukur jarak antara suatu titik dan tetangga terdekatnya. Teknik seperti K-Nearest Neighbor Distance dan Local Outlier Factor (LOF) memungkinkan kita mengidentifikasi data dengan kepadatan rendah atau yang jauh dari pola umum sebagai outlier. Keberhasilan deteksi outlier dengan KNN sangat bergantung pada pemilihan nilai K yang sesuai dan pemilihan metrik jarak yang tepat.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">pip</span> install pymysql
<span class="o">%</span><span class="k">pip</span> install psycopg2
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: pymysql in /usr/local/python/3.12.1/lib/python3.12/site-packages (1.1.1)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Bold">[</span><span class=" -Color -Color-Blue">notice</span><span class=" -Color -Color-Bold">]</span> A new release of pip is available: <span class=" -Color -Color-Red">24.3.1</span> -&gt; <span class=" -Color -Color-Green">25.0.1</span>
<span class=" -Color -Color-Bold">[</span><span class=" -Color -Color-Blue">notice</span><span class=" -Color -Color-Bold">]</span> To update, run: <span class=" -Color -Color-Green">python3 -m pip install --upgrade pip</span>
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Note: you may need to restart the kernel to use updated packages.
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: psycopg2 in /usr/local/python/3.12.1/lib/python3.12/site-packages (2.9.10)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span><span class=" -Color -Color-Bold">[</span><span class=" -Color -Color-Blue">notice</span><span class=" -Color -Color-Bold">]</span> A new release of pip is available: <span class=" -Color -Color-Red">24.3.1</span> -&gt; <span class=" -Color -Color-Green">25.0.1</span>
<span class=" -Color -Color-Bold">[</span><span class=" -Color -Color-Blue">notice</span><span class=" -Color -Color-Bold">]</span> To update, run: <span class=" -Color -Color-Green">python3 -m pip install --upgrade pip</span>
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Note: you may need to restart the kernel to use updated packages.
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">psycopg2</span>
<span class="kn">import</span> <span class="nn">pymysql</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">scipy.spatial.distance</span> <span class="kn">import</span> <span class="n">euclidean</span>

<span class="k">def</span> <span class="nf">get_pg_data</span><span class="p">():</span>
    <span class="n">conn</span> <span class="o">=</span> <span class="n">psycopg2</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
        <span class="n">host</span><span class="o">=</span><span class="s2">&quot;ndik-anugrahs15042004-79e6.d.aivencloud.com&quot;</span><span class="p">,</span>
        <span class="n">user</span><span class="o">=</span><span class="s2">&quot;avnadmin&quot;</span><span class="p">,</span>
        <span class="n">password</span><span class="o">=</span><span class="s2">&quot;AVNS_7FsJrvmsNJPSkv0qE-1&quot;</span><span class="p">,</span>
        <span class="n">database</span><span class="o">=</span><span class="s2">&quot;defaultdb&quot;</span><span class="p">,</span>
        <span class="n">port</span><span class="o">=</span><span class="mi">18856</span>
    <span class="p">)</span>
    <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM sepal&quot;</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
    <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">desc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">desc</span> <span class="ow">in</span> <span class="n">cursor</span><span class="o">.</span><span class="n">description</span><span class="p">]</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">get_mysql_data</span><span class="p">():</span>
    <span class="n">conn</span> <span class="o">=</span> <span class="n">pymysql</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
        <span class="n">host</span><span class="o">=</span><span class="s2">&quot;mulyono-anugrahs15042004-79e6.d.aivencloud.com&quot;</span><span class="p">,</span>
        <span class="n">user</span><span class="o">=</span><span class="s2">&quot;avnadmin&quot;</span><span class="p">,</span>
        <span class="n">password</span><span class="o">=</span><span class="s2">&quot;AVNS_UrgkI5rl3s3AFs4zUkw&quot;</span><span class="p">,</span>
        <span class="n">database</span><span class="o">=</span><span class="s2">&quot;iris&quot;</span><span class="p">,</span>
        <span class="n">port</span><span class="o">=</span><span class="mi">18856</span>
    <span class="p">)</span>
    <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM petal&quot;</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
    <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">desc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">desc</span> <span class="ow">in</span> <span class="n">cursor</span><span class="o">.</span><span class="n">description</span><span class="p">]</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">)</span>

<span class="c1"># Ambil data dari kedua database</span>
<span class="n">df_postgresql</span> <span class="o">=</span> <span class="n">get_pg_data</span><span class="p">()</span>
<span class="n">df_mysql</span> <span class="o">=</span> <span class="n">get_mysql_data</span><span class="p">()</span>

<span class="c1"># Gabungkan berdasarkan kolom &#39;id&#39; dan &#39;Class&#39;</span>
<span class="n">df_merged</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">df_mysql</span><span class="p">,</span> <span class="n">df_postgresql</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="s2">&quot;class&quot;</span><span class="p">],</span> <span class="n">how</span><span class="o">=</span><span class="s2">&quot;inner&quot;</span><span class="p">)</span>

<span class="c1"># Ambil data fitur numerik</span>
<span class="n">feature_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;petal_length&quot;</span><span class="p">,</span> <span class="s2">&quot;petal_width&quot;</span><span class="p">,</span> <span class="s2">&quot;sepal_length&quot;</span><span class="p">,</span> <span class="s2">&quot;sepal_width&quot;</span><span class="p">]</span>
<span class="n">data_values</span> <span class="o">=</span> <span class="n">df_merged</span><span class="p">[</span><span class="n">feature_columns</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>

<span class="c1"># Ambil referensi dari baris terakhir (baris ke-152 jika dihitung dari 1, atau index -1)</span>
<span class="n">reference_point</span> <span class="o">=</span> <span class="n">data_values</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">compute_distances</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">reference</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">euclidean</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">reference</span><span class="p">)</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">data</span><span class="p">])</span>

<span class="c1"># Hitung jarak Euclidean dari setiap baris ke referensi</span>
<span class="n">df_merged</span><span class="p">[</span><span class="s2">&quot;distance&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">compute_distances</span><span class="p">(</span><span class="n">data_values</span><span class="p">,</span> <span class="n">reference_point</span><span class="p">)</span>

<span class="c1"># Tentukan threshold outlier berdasarkan persentil ke-95 (bisa disesuaikan)</span>
<span class="n">threshold</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">df_merged</span><span class="p">[</span><span class="s2">&quot;distance&quot;</span><span class="p">],</span> <span class="mf">93.5</span><span class="p">)</span>
<span class="n">df_merged</span><span class="p">[</span><span class="s2">&quot;outlier&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_merged</span><span class="p">[</span><span class="s2">&quot;distance&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">threshold</span>

<span class="c1"># Cetak hasil data dengan outlier</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df_merged</span><span class="o">.</span><span class="n">to_string</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>

<span class="c1"># Visualisasi scatter plot dengan warna berdasarkan outlier</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="n">df_merged</span><span class="p">[</span><span class="s2">&quot;sepal_length&quot;</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="n">df_merged</span><span class="p">[</span><span class="s2">&quot;sepal_width&quot;</span><span class="p">],</span>
    <span class="n">hue</span><span class="o">=</span><span class="n">df_merged</span><span class="p">[</span><span class="s2">&quot;outlier&quot;</span><span class="p">],</span> <span class="n">palette</span><span class="o">=</span><span class="p">{</span><span class="kc">False</span><span class="p">:</span> <span class="s2">&quot;blue&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">:</span> <span class="s2">&quot;red&quot;</span><span class="p">}</span>
<span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Outlier Detection (Sepal)&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="n">df_merged</span><span class="p">[</span><span class="s2">&quot;petal_length&quot;</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="n">df_merged</span><span class="p">[</span><span class="s2">&quot;petal_width&quot;</span><span class="p">],</span>
    <span class="n">hue</span><span class="o">=</span><span class="n">df_merged</span><span class="p">[</span><span class="s2">&quot;outlier&quot;</span><span class="p">],</span> <span class="n">palette</span><span class="o">=</span><span class="p">{</span><span class="kc">False</span><span class="p">:</span> <span class="s2">&quot;blue&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">:</span> <span class="s2">&quot;red&quot;</span><span class="p">}</span>
<span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Outlier Detection (Petal)&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> id           class  petal_length  petal_width  sepal_length  sepal_width  distance  outlier
  1     Iris-setosa          15.6         32.4          20.3         25.7 42.062572     True
  2     Iris-setosa          14.0          2.0          40.9         30.0 45.091573     True
  3     Iris-setosa           1.3          0.2           4.7          3.2  4.298837    False
  4     Iris-setosa           1.5          0.2           4.6          3.1  4.149699    False
  5     Iris-setosa           1.4          0.2           5.0          3.6  4.173727    False
  6     Iris-setosa           1.7          0.4           5.4          3.9  3.818377    False
  7     Iris-setosa           1.4          0.3           4.6          3.4  4.217819    False
  8     Iris-setosa           1.5          0.2           5.0          3.4  4.060788    False
  9     Iris-setosa           1.4          0.2           4.4          2.9  4.302325    False
 10     Iris-setosa          24.2         13.4          33.2         24.1 41.108028    False
 11     Iris-setosa           1.5          0.2           5.4          3.7  4.032369    False
 12     Iris-setosa           1.6          0.2           4.8          3.4  4.022437    False
 13     Iris-setosa           1.4          0.1           4.8          3.0  4.217819    False
 14     Iris-setosa           1.1          0.1           4.3          3.0  4.631414    False
 15     Iris-setosa           1.2          0.2           5.8          4.0  4.333590    False
 16     Iris-setosa           1.5          0.4           5.7          4.4  4.113393    False
 17     Iris-setosa           1.3          0.4           5.4          3.9  4.178516    False
 18     Iris-setosa           1.4          0.3           5.1          3.5  4.102438    False
 19     Iris-setosa           1.7          0.3           5.7          3.8  3.806573    False
 20     Iris-setosa          21.3         13.1          11.4         15.0 23.756683    False
 21     Iris-setosa           1.7          0.2           5.4          3.4  3.811824    False
 22     Iris-setosa           1.5          0.4           5.1          3.7  4.006245    False
 23     Iris-setosa           1.0          0.2           4.6          3.6  4.628175    False
 24     Iris-setosa           1.7          0.5           5.1          3.3  3.738984    False
 25     Iris-setosa           1.9          0.2           4.8          3.4  3.764306    False
 26     Iris-setosa           1.6          0.2           5.0          3.0  3.952215    False
 27     Iris-setosa           1.6          0.4           5.0          3.4  3.896152    False
 28     Iris-setosa           1.5          0.2           5.2          3.5  4.032369    False
 29     Iris-setosa           1.4          0.2           5.2          3.4  4.110961    False
 30     Iris-setosa          48.3         26.7          43.6         14.3 63.523460     True
 31     Iris-setosa           1.6          0.2           4.8          3.1  4.003748    False
 32     Iris-setosa           1.5          0.4           5.4          3.4  3.915354    False
 33     Iris-setosa           1.5          0.1           5.2          4.1  4.189272    False
 34     Iris-setosa           1.4          0.2           5.5          4.2  4.224926    False
 35     Iris-setosa           1.5          0.1           4.9          3.1  4.106093    False
 36     Iris-setosa           1.2          0.2           5.0          3.2  4.315090    False
 37     Iris-setosa           1.3          0.2           5.5          3.5  4.172529    False
 38     Iris-setosa           1.5          0.1           4.9          3.1  4.106093    False
 39     Iris-setosa           1.3          0.2           4.4          3.0  4.387482    False
 40     Iris-setosa          55.8         23.0          33.0         22.7 64.361712     True
 41     Iris-setosa           1.3          0.3           5.0          3.5  4.213075    False
 42     Iris-setosa           1.3          0.3           4.5          2.3  4.374929    False
 43     Iris-setosa           1.3          0.2           4.4          3.2  4.392038    False
 44     Iris-setosa           1.6          0.6           5.0          3.5  3.840573    False
 45     Iris-setosa           1.9          0.4           5.1          3.8  3.671512    False
 46     Iris-setosa           1.4          0.3           4.8          3.0  4.141256    False
 47     Iris-setosa           1.6          0.2           5.1          3.8  4.011234    False
 48     Iris-setosa           1.4          0.2           4.6          3.2  4.240283    False
 49     Iris-setosa           1.5          0.2           5.3          3.7  4.045986    False
 50     Iris-setosa          43.0         25.0          21.4         20.0 50.038985     True
 51 Iris-versicolor           4.7          1.4           7.0          3.2  1.252996    False
 52 Iris-versicolor           4.5          1.5           6.4          3.2  0.860233    False
 53 Iris-versicolor           4.9          1.5           6.9          3.1  1.067708    False
 54 Iris-versicolor           4.0          1.3           5.5          2.3  1.452584    False
 55 Iris-versicolor           4.6          1.5           6.5          2.8  0.860233    False
 56 Iris-versicolor           4.5          1.3           5.7          2.8  0.830662    False
 57 Iris-versicolor           4.7          1.6           6.3          3.3  0.670820    False
 58 Iris-versicolor           3.3          1.0           4.9          2.4  2.289105    False
 59 Iris-versicolor           4.6          1.3           6.6          2.9  1.000000    False
 60 Iris-versicolor          27.0         44.0          44.0         32.9 67.868034     True
 61 Iris-versicolor           3.5          1.0           5.0          2.0  2.238303    False
 62 Iris-versicolor           4.2          1.5           5.9          3.0  0.948683    False
 63 Iris-versicolor           4.0          1.0           6.0          2.2  1.581139    False
 64 Iris-versicolor           4.7          1.4           6.1          2.9  0.608276    False
 65 Iris-versicolor           3.6          1.3           5.6          2.9  1.612452    False
 66 Iris-versicolor           4.4          1.4           6.7          3.1  1.140175    False
 67 Iris-versicolor           4.5          1.5           5.6          3.0  0.734847    False
 68 Iris-versicolor           4.1          1.0           5.8          2.7  1.319091    False
 69 Iris-versicolor           4.5          1.5           6.2          2.2  1.086278    False
 70 Iris-versicolor          20.5         40.0          26.7         35.0 56.151937     True
 71 Iris-versicolor           4.8          1.8           5.9          3.2  0.360555    False
 72 Iris-versicolor           4.0          1.3           6.1          2.8  1.240967    False
 73 Iris-versicolor           4.9          1.5           6.3          2.5  0.734847    False
 74 Iris-versicolor           4.7          1.2           6.1          2.8  0.774597    False
 75 Iris-versicolor           4.3          1.3           6.4          2.9  1.072381    False
 76 Iris-versicolor           4.4          1.4           6.6          3.0  1.067708    False
 77 Iris-versicolor           4.8          1.4           6.8          2.8  1.048809    False
 78 Iris-versicolor           5.0          1.7           6.7          3.0  0.812404    False
 79 Iris-versicolor           4.5          1.5           6.0          2.9  0.685565    False
 80 Iris-versicolor          32.0         54.0          22.0         16.9 62.456945     True
 81 Iris-versicolor           3.8          1.1           5.5          2.4  1.643168    False
 82 Iris-versicolor           3.7          1.0           5.5          2.4  1.766352    False
 83 Iris-versicolor           3.9          1.2           5.8          2.7  1.378405    False
 84 Iris-versicolor           5.1          1.6           6.0          2.7  0.374166    False
 85 Iris-versicolor           4.5          1.5           5.4          3.0  0.836660    False
 86 Iris-versicolor           4.5          1.6           6.0          3.4  0.754983    False
 87 Iris-versicolor           4.7          1.5           6.7          3.1  0.948683    False
 88 Iris-versicolor           4.4          1.3           6.3          2.3  1.178983    False
 89 Iris-versicolor           4.1          1.3           5.6          3.0  1.157584    False
 90 Iris-versicolor          41.0         62.2          44.0         22.7 82.320532     True
 91 Iris-versicolor           4.4          1.2           5.5          2.6  1.081665    False
 92 Iris-versicolor           4.6          1.4           6.1          3.0  0.670820    False
 93 Iris-versicolor           4.0          1.2           5.8          2.6  1.319091    False
 94 Iris-versicolor           3.3          1.0           5.0          2.3  2.275961    False
 95 Iris-versicolor           4.2          1.3           5.6          2.7  1.113553    False
 96 Iris-versicolor           4.2          1.2           5.7          3.0  1.100000    False
 97 Iris-versicolor           4.2          1.3           5.7          2.9  1.053565    False
 98 Iris-versicolor           4.3          1.3           6.2          2.9  0.994987    False
 99 Iris-versicolor           3.0          1.1           5.1          2.5  2.406242    False
100 Iris-versicolor          43.0         27.6          44.7         33.6 67.408086     True
101  Iris-virginica           6.0          2.5           6.3          3.3  1.244990    False
102  Iris-virginica           5.1          1.9           5.8          2.7  0.331662    False
103  Iris-virginica           5.9          2.1           7.1          3.0  1.473092    False
104  Iris-virginica           5.6          1.8           6.3          2.9  0.648074    False
105  Iris-virginica           5.8          2.2           6.5          3.0  1.004988    False
106  Iris-virginica           6.6          2.1           7.6          3.0  2.286919    False
107  Iris-virginica           4.5          1.7           4.9          2.5  1.272792    False
108  Iris-virginica           6.3          1.8           7.3          2.9  1.846619    False
109  Iris-virginica           5.8          1.8           6.7          2.5  1.174734    False
110  Iris-virginica           6.1          2.5           7.2          3.6  1.881489    False
111  Iris-virginica           5.1          2.0           6.5          3.2  0.663325    False
112  Iris-virginica           5.3          1.9           6.4          2.7  0.624500    False
113  Iris-virginica           5.5          2.1           6.8          3.0  1.029563    False
114  Iris-virginica           5.0          2.0           5.7          2.5  0.583095    False
115  Iris-virginica           5.1          2.4           5.8          2.8  0.640312    False
116  Iris-virginica           5.3          2.3           6.4          3.2  0.761577    False
117  Iris-virginica           5.5          1.8           6.5          3.0  0.721110    False
118  Iris-virginica           6.7          2.2           7.7          3.8  2.569047    False
119  Iris-virginica           6.9          2.3           7.7          2.6  2.624881    False
120  Iris-virginica           5.0          1.5           6.0          2.2  0.866025    False
121  Iris-virginica           5.7          2.3           6.9          3.2  1.284523    False
122  Iris-virginica           4.9          2.0           5.6          2.8  0.458258    False
123  Iris-virginica           6.7          2.0           7.7          2.8  2.424871    False
124  Iris-virginica           4.9          1.8           6.3          2.7  0.538516    False
125  Iris-virginica           5.7          2.1           6.7          3.3  1.086278    False
126  Iris-virginica           6.0          1.8           7.2          3.2  1.593738    False
127  Iris-virginica           4.8          1.8           6.2          2.8  0.469042    False
128  Iris-virginica           4.9          1.8           6.1          3.0  0.282843    False
129  Iris-virginica           5.6          2.1           6.4          2.8  0.793725    False
130  Iris-virginica           5.8          1.6           7.2          3.0  1.489966    False
131  Iris-virginica           6.1          1.9           7.4          2.8  1.816590    False
132  Iris-virginica           6.4          2.0           7.9          3.8  2.523886    False
133  Iris-virginica           5.6          2.2           6.4          2.8  0.836660    False
134  Iris-virginica           5.1          1.5           6.3          2.8  0.538516    False
135  Iris-virginica           5.6          1.4           6.1          2.6  0.781025    False
136  Iris-virginica           6.1          2.3           7.7          3.0  2.118962    False
137  Iris-virginica           5.6          2.4           6.3          3.4  0.964365    False
138  Iris-virginica           5.5          1.8           6.4          3.1  0.648074    False
139  Iris-virginica           4.8          1.8           6.0          3.0  0.316228    False
140  Iris-virginica           5.4          2.1           6.9          3.1  1.090871    False
141  Iris-virginica           5.6          2.4           6.7          3.1  1.122497    False
142  Iris-virginica           5.1          2.3           6.9          3.1  1.122497    False
143  Iris-virginica           5.1          1.9           5.8          2.7  0.331662    False
144  Iris-virginica           5.9          2.3           6.8          3.2  1.319091    False
145  Iris-virginica           5.7          2.5           6.7          3.3  1.256981    False
146  Iris-virginica           5.2          2.3           6.7          3.0  0.948683    False
147  Iris-virginica           5.0          1.9           6.3          2.5  0.655744    False
148  Iris-virginica           5.2          2.0           6.5          3.0  0.640312    False
149  Iris-virginica           5.4          2.3           6.2          3.4  0.768115    False
150  Iris-virginica           5.1          1.8           5.9          3.0  0.000000    False
</pre></div>
</div>
<img alt="_images/b97425cdba6675ef70fb6556e80c3f2b9d8a7048089fb9192095043b65ed67c8.png" src="_images/b97425cdba6675ef70fb6556e80c3f2b9d8a7048089fb9192095043b65ed67c8.png" />
<img alt="_images/00057b46399329829621284f71a9ddb9a71faf25a7d84e1362c146889f937518.png" src="_images/00057b46399329829621284f71a9ddb9a71faf25a7d84e1362c146889f937518.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Hitung total outlier</span>
<span class="n">total_outliers</span> <span class="o">=</span> <span class="n">df_merged</span><span class="p">[</span><span class="s2">&quot;outlier&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Total Outlier: </span><span class="si">{</span><span class="n">total_outliers</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Total Outlier: 10
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Urutkan data berdasarkan jarak dari terkecil ke terbesar</span>
<span class="n">df_sorted</span> <span class="o">=</span> <span class="n">df_merged</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s2">&quot;distance&quot;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Tampilkan hasilnya</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df_sorted</span><span class="o">.</span><span class="n">to_string</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> id           class  petal_length  petal_width  sepal_length  sepal_width  distance  outlier
150  Iris-virginica           5.1          1.8           5.9          3.0  0.000000    False
128  Iris-virginica           4.9          1.8           6.1          3.0  0.282843    False
139  Iris-virginica           4.8          1.8           6.0          3.0  0.316228    False
102  Iris-virginica           5.1          1.9           5.8          2.7  0.331662    False
143  Iris-virginica           5.1          1.9           5.8          2.7  0.331662    False
 71 Iris-versicolor           4.8          1.8           5.9          3.2  0.360555    False
 84 Iris-versicolor           5.1          1.6           6.0          2.7  0.374166    False
122  Iris-virginica           4.9          2.0           5.6          2.8  0.458258    False
127  Iris-virginica           4.8          1.8           6.2          2.8  0.469042    False
124  Iris-virginica           4.9          1.8           6.3          2.7  0.538516    False
134  Iris-virginica           5.1          1.5           6.3          2.8  0.538516    False
114  Iris-virginica           5.0          2.0           5.7          2.5  0.583095    False
 64 Iris-versicolor           4.7          1.4           6.1          2.9  0.608276    False
112  Iris-virginica           5.3          1.9           6.4          2.7  0.624500    False
148  Iris-virginica           5.2          2.0           6.5          3.0  0.640312    False
115  Iris-virginica           5.1          2.4           5.8          2.8  0.640312    False
104  Iris-virginica           5.6          1.8           6.3          2.9  0.648074    False
138  Iris-virginica           5.5          1.8           6.4          3.1  0.648074    False
147  Iris-virginica           5.0          1.9           6.3          2.5  0.655744    False
111  Iris-virginica           5.1          2.0           6.5          3.2  0.663325    False
 57 Iris-versicolor           4.7          1.6           6.3          3.3  0.670820    False
 92 Iris-versicolor           4.6          1.4           6.1          3.0  0.670820    False
 79 Iris-versicolor           4.5          1.5           6.0          2.9  0.685565    False
117  Iris-virginica           5.5          1.8           6.5          3.0  0.721110    False
 73 Iris-versicolor           4.9          1.5           6.3          2.5  0.734847    False
 67 Iris-versicolor           4.5          1.5           5.6          3.0  0.734847    False
 86 Iris-versicolor           4.5          1.6           6.0          3.4  0.754983    False
116  Iris-virginica           5.3          2.3           6.4          3.2  0.761577    False
149  Iris-virginica           5.4          2.3           6.2          3.4  0.768115    False
 74 Iris-versicolor           4.7          1.2           6.1          2.8  0.774597    False
135  Iris-virginica           5.6          1.4           6.1          2.6  0.781025    False
129  Iris-virginica           5.6          2.1           6.4          2.8  0.793725    False
 78 Iris-versicolor           5.0          1.7           6.7          3.0  0.812404    False
 56 Iris-versicolor           4.5          1.3           5.7          2.8  0.830662    False
 85 Iris-versicolor           4.5          1.5           5.4          3.0  0.836660    False
133  Iris-virginica           5.6          2.2           6.4          2.8  0.836660    False
 55 Iris-versicolor           4.6          1.5           6.5          2.8  0.860233    False
 52 Iris-versicolor           4.5          1.5           6.4          3.2  0.860233    False
120  Iris-virginica           5.0          1.5           6.0          2.2  0.866025    False
 62 Iris-versicolor           4.2          1.5           5.9          3.0  0.948683    False
 87 Iris-versicolor           4.7          1.5           6.7          3.1  0.948683    False
146  Iris-virginica           5.2          2.3           6.7          3.0  0.948683    False
137  Iris-virginica           5.6          2.4           6.3          3.4  0.964365    False
 98 Iris-versicolor           4.3          1.3           6.2          2.9  0.994987    False
 59 Iris-versicolor           4.6          1.3           6.6          2.9  1.000000    False
105  Iris-virginica           5.8          2.2           6.5          3.0  1.004988    False
113  Iris-virginica           5.5          2.1           6.8          3.0  1.029563    False
 77 Iris-versicolor           4.8          1.4           6.8          2.8  1.048809    False
 97 Iris-versicolor           4.2          1.3           5.7          2.9  1.053565    False
 76 Iris-versicolor           4.4          1.4           6.6          3.0  1.067708    False
 53 Iris-versicolor           4.9          1.5           6.9          3.1  1.067708    False
 75 Iris-versicolor           4.3          1.3           6.4          2.9  1.072381    False
 91 Iris-versicolor           4.4          1.2           5.5          2.6  1.081665    False
 69 Iris-versicolor           4.5          1.5           6.2          2.2  1.086278    False
125  Iris-virginica           5.7          2.1           6.7          3.3  1.086278    False
140  Iris-virginica           5.4          2.1           6.9          3.1  1.090871    False
 96 Iris-versicolor           4.2          1.2           5.7          3.0  1.100000    False
 95 Iris-versicolor           4.2          1.3           5.6          2.7  1.113553    False
141  Iris-virginica           5.6          2.4           6.7          3.1  1.122497    False
142  Iris-virginica           5.1          2.3           6.9          3.1  1.122497    False
 66 Iris-versicolor           4.4          1.4           6.7          3.1  1.140175    False
 89 Iris-versicolor           4.1          1.3           5.6          3.0  1.157584    False
109  Iris-virginica           5.8          1.8           6.7          2.5  1.174734    False
 88 Iris-versicolor           4.4          1.3           6.3          2.3  1.178983    False
 72 Iris-versicolor           4.0          1.3           6.1          2.8  1.240967    False
101  Iris-virginica           6.0          2.5           6.3          3.3  1.244990    False
 51 Iris-versicolor           4.7          1.4           7.0          3.2  1.252996    False
145  Iris-virginica           5.7          2.5           6.7          3.3  1.256981    False
107  Iris-virginica           4.5          1.7           4.9          2.5  1.272792    False
121  Iris-virginica           5.7          2.3           6.9          3.2  1.284523    False
 93 Iris-versicolor           4.0          1.2           5.8          2.6  1.319091    False
144  Iris-virginica           5.9          2.3           6.8          3.2  1.319091    False
 68 Iris-versicolor           4.1          1.0           5.8          2.7  1.319091    False
 83 Iris-versicolor           3.9          1.2           5.8          2.7  1.378405    False
 54 Iris-versicolor           4.0          1.3           5.5          2.3  1.452584    False
103  Iris-virginica           5.9          2.1           7.1          3.0  1.473092    False
130  Iris-virginica           5.8          1.6           7.2          3.0  1.489966    False
 63 Iris-versicolor           4.0          1.0           6.0          2.2  1.581139    False
126  Iris-virginica           6.0          1.8           7.2          3.2  1.593738    False
 65 Iris-versicolor           3.6          1.3           5.6          2.9  1.612452    False
 81 Iris-versicolor           3.8          1.1           5.5          2.4  1.643168    False
 82 Iris-versicolor           3.7          1.0           5.5          2.4  1.766352    False
131  Iris-virginica           6.1          1.9           7.4          2.8  1.816590    False
108  Iris-virginica           6.3          1.8           7.3          2.9  1.846619    False
110  Iris-virginica           6.1          2.5           7.2          3.6  1.881489    False
136  Iris-virginica           6.1          2.3           7.7          3.0  2.118962    False
 61 Iris-versicolor           3.5          1.0           5.0          2.0  2.238303    False
 94 Iris-versicolor           3.3          1.0           5.0          2.3  2.275961    False
106  Iris-virginica           6.6          2.1           7.6          3.0  2.286919    False
 58 Iris-versicolor           3.3          1.0           4.9          2.4  2.289105    False
 99 Iris-versicolor           3.0          1.1           5.1          2.5  2.406242    False
123  Iris-virginica           6.7          2.0           7.7          2.8  2.424871    False
132  Iris-virginica           6.4          2.0           7.9          3.8  2.523886    False
118  Iris-virginica           6.7          2.2           7.7          3.8  2.569047    False
119  Iris-virginica           6.9          2.3           7.7          2.6  2.624881    False
 45     Iris-setosa           1.9          0.4           5.1          3.8  3.671512    False
 24     Iris-setosa           1.7          0.5           5.1          3.3  3.738984    False
 25     Iris-setosa           1.9          0.2           4.8          3.4  3.764306    False
 19     Iris-setosa           1.7          0.3           5.7          3.8  3.806573    False
 21     Iris-setosa           1.7          0.2           5.4          3.4  3.811824    False
  6     Iris-setosa           1.7          0.4           5.4          3.9  3.818377    False
 44     Iris-setosa           1.6          0.6           5.0          3.5  3.840573    False
 27     Iris-setosa           1.6          0.4           5.0          3.4  3.896152    False
 32     Iris-setosa           1.5          0.4           5.4          3.4  3.915354    False
 26     Iris-setosa           1.6          0.2           5.0          3.0  3.952215    False
 31     Iris-setosa           1.6          0.2           4.8          3.1  4.003748    False
 22     Iris-setosa           1.5          0.4           5.1          3.7  4.006245    False
 47     Iris-setosa           1.6          0.2           5.1          3.8  4.011234    False
 12     Iris-setosa           1.6          0.2           4.8          3.4  4.022437    False
 11     Iris-setosa           1.5          0.2           5.4          3.7  4.032369    False
 28     Iris-setosa           1.5          0.2           5.2          3.5  4.032369    False
 49     Iris-setosa           1.5          0.2           5.3          3.7  4.045986    False
  8     Iris-setosa           1.5          0.2           5.0          3.4  4.060788    False
 18     Iris-setosa           1.4          0.3           5.1          3.5  4.102438    False
 35     Iris-setosa           1.5          0.1           4.9          3.1  4.106093    False
 38     Iris-setosa           1.5          0.1           4.9          3.1  4.106093    False
 29     Iris-setosa           1.4          0.2           5.2          3.4  4.110961    False
 16     Iris-setosa           1.5          0.4           5.7          4.4  4.113393    False
 46     Iris-setosa           1.4          0.3           4.8          3.0  4.141256    False
  4     Iris-setosa           1.5          0.2           4.6          3.1  4.149699    False
 37     Iris-setosa           1.3          0.2           5.5          3.5  4.172529    False
  5     Iris-setosa           1.4          0.2           5.0          3.6  4.173727    False
 17     Iris-setosa           1.3          0.4           5.4          3.9  4.178516    False
 33     Iris-setosa           1.5          0.1           5.2          4.1  4.189272    False
 41     Iris-setosa           1.3          0.3           5.0          3.5  4.213075    False
  7     Iris-setosa           1.4          0.3           4.6          3.4  4.217819    False
 13     Iris-setosa           1.4          0.1           4.8          3.0  4.217819    False
 34     Iris-setosa           1.4          0.2           5.5          4.2  4.224926    False
 48     Iris-setosa           1.4          0.2           4.6          3.2  4.240283    False
  3     Iris-setosa           1.3          0.2           4.7          3.2  4.298837    False
  9     Iris-setosa           1.4          0.2           4.4          2.9  4.302325    False
 36     Iris-setosa           1.2          0.2           5.0          3.2  4.315090    False
 15     Iris-setosa           1.2          0.2           5.8          4.0  4.333590    False
 42     Iris-setosa           1.3          0.3           4.5          2.3  4.374929    False
 39     Iris-setosa           1.3          0.2           4.4          3.0  4.387482    False
 43     Iris-setosa           1.3          0.2           4.4          3.2  4.392038    False
 23     Iris-setosa           1.0          0.2           4.6          3.6  4.628175    False
 14     Iris-setosa           1.1          0.1           4.3          3.0  4.631414    False
 20     Iris-setosa          21.3         13.1          11.4         15.0 23.756683    False
 10     Iris-setosa          24.2         13.4          33.2         24.1 41.108028    False
  1     Iris-setosa          15.6         32.4          20.3         25.7 42.062572     True
  2     Iris-setosa          14.0          2.0          40.9         30.0 45.091573     True
 50     Iris-setosa          43.0         25.0          21.4         20.0 50.038985     True
 70 Iris-versicolor          20.5         40.0          26.7         35.0 56.151937     True
 80 Iris-versicolor          32.0         54.0          22.0         16.9 62.456945     True
 30     Iris-setosa          48.3         26.7          43.6         14.3 63.523460     True
 40     Iris-setosa          55.8         23.0          33.0         22.7 64.361712     True
100 Iris-versicolor          43.0         27.6          44.7         33.6 67.408086     True
 60 Iris-versicolor          27.0         44.0          44.0         32.9 67.868034     True
 90 Iris-versicolor          41.0         62.2          44.0         22.7 82.320532     True
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">psycopg2</span>
<span class="kn">import</span> <span class="nn">pymysql</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">sklearn.neighbors</span> <span class="kn">import</span> <span class="n">NearestNeighbors</span>

<span class="k">def</span> <span class="nf">get_pg_data</span><span class="p">():</span>
    <span class="n">conn</span> <span class="o">=</span> <span class="n">psycopg2</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
        <span class="n">host</span><span class="o">=</span><span class="s2">&quot;ndik-anugrahs15042004-79e6.d.aivencloud.com&quot;</span><span class="p">,</span>
        <span class="n">user</span><span class="o">=</span><span class="s2">&quot;avnadmin&quot;</span><span class="p">,</span>
        <span class="n">password</span><span class="o">=</span><span class="s2">&quot;AVNS_7FsJrvmsNJPSkv0qE-1&quot;</span><span class="p">,</span>
        <span class="n">database</span><span class="o">=</span><span class="s2">&quot;defaultdb&quot;</span><span class="p">,</span>
        <span class="n">port</span><span class="o">=</span><span class="mi">18856</span>
    <span class="p">)</span>
    <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM sepal&quot;</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
    <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">desc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">desc</span> <span class="ow">in</span> <span class="n">cursor</span><span class="o">.</span><span class="n">description</span><span class="p">]</span>  <span class="c1"># Ambil nama kolom</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">get_mysql_data</span><span class="p">():</span>
    <span class="n">conn</span> <span class="o">=</span> <span class="n">pymysql</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
        <span class="n">host</span><span class="o">=</span><span class="s2">&quot;mulyono-anugrahs15042004-79e6.d.aivencloud.com&quot;</span><span class="p">,</span>
        <span class="n">user</span><span class="o">=</span><span class="s2">&quot;avnadmin&quot;</span><span class="p">,</span>
        <span class="n">password</span><span class="o">=</span><span class="s2">&quot;AVNS_UrgkI5rl3s3AFs4zUkw&quot;</span><span class="p">,</span>
        <span class="n">database</span><span class="o">=</span><span class="s2">&quot;iris&quot;</span><span class="p">,</span>
        <span class="n">port</span><span class="o">=</span><span class="mi">18856</span>
    <span class="p">)</span>
    <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM petal&quot;</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
    <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">desc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">desc</span> <span class="ow">in</span> <span class="n">cursor</span><span class="o">.</span><span class="n">description</span><span class="p">]</span>  <span class="c1"># Ambil nama kolom</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">)</span>

<span class="c1"># Ambil data dari kedua database</span>
<span class="n">df_postgresql</span> <span class="o">=</span> <span class="n">get_pg_data</span><span class="p">()</span>
<span class="n">df_mysql</span> <span class="o">=</span> <span class="n">get_mysql_data</span><span class="p">()</span>

<span class="c1"># Gabungkan berdasarkan kolom &#39;id&#39;</span>
<span class="n">df_merged</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">df_mysql</span><span class="p">,</span> <span class="n">df_postgresql</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="s2">&quot;class&quot;</span><span class="p">],</span> <span class="n">how</span><span class="o">=</span><span class="s2">&quot;inner&quot;</span><span class="p">)</span>

<span class="c1"># Ambil data fitur numerik</span>
<span class="n">feature_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;petal_length&quot;</span><span class="p">,</span> <span class="s2">&quot;petal_width&quot;</span><span class="p">,</span> <span class="s2">&quot;sepal_length&quot;</span><span class="p">,</span> <span class="s2">&quot;sepal_width&quot;</span><span class="p">]</span>
<span class="n">data_values</span> <span class="o">=</span> <span class="n">df_merged</span><span class="p">[</span><span class="n">feature_columns</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>

<span class="c1"># KNN Outlier Detection</span>
<span class="k">def</span> <span class="nf">knn_outlier_detection</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
    <span class="n">neigh</span> <span class="o">=</span> <span class="n">NearestNeighbors</span><span class="p">(</span><span class="n">n_neighbors</span><span class="o">=</span><span class="n">k</span><span class="p">)</span>
    <span class="n">neigh</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="n">distances</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">neigh</span><span class="o">.</span><span class="n">kneighbors</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="n">avg_distances</span> <span class="o">=</span> <span class="n">distances</span><span class="p">[:,</span> <span class="o">-</span><span class="mi">1</span><span class="p">]</span>  <span class="c1"># Ambil jarak k-terjauh sebagai skor</span>
    <span class="k">return</span> <span class="n">avg_distances</span>

<span class="c1"># Hitung K-NN distance</span>
<span class="n">df_merged</span><span class="p">[</span><span class="s2">&quot;knn_distance&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">knn_outlier_detection</span><span class="p">(</span><span class="n">data_values</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

<span class="c1"># Tentukan threshold sebagai nilai rata-rata + 2 standar deviasi</span>
<span class="n">threshold</span> <span class="o">=</span> <span class="n">df_merged</span><span class="p">[</span><span class="s2">&quot;knn_distance&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">df_merged</span><span class="p">[</span><span class="s2">&quot;knn_distance&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">std</span><span class="p">()</span>
<span class="n">df_merged</span><span class="p">[</span><span class="s2">&quot;outlier_knn&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_merged</span><span class="p">[</span><span class="s2">&quot;knn_distance&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">threshold</span>

<span class="c1"># Cetak hasil</span>
<span class="n">df_result</span> <span class="o">=</span> <span class="n">df_merged</span><span class="p">[[</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="s2">&quot;petal_length&quot;</span><span class="p">,</span> <span class="s2">&quot;petal_width&quot;</span><span class="p">,</span> <span class="s2">&quot;sepal_length&quot;</span><span class="p">,</span> <span class="s2">&quot;sepal_width&quot;</span><span class="p">,</span> <span class="s2">&quot;knn_distance&quot;</span><span class="p">,</span> <span class="s2">&quot;outlier_knn&quot;</span><span class="p">]]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df_result</span><span class="o">.</span><span class="n">to_string</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
<span class="n">num_outliers</span> <span class="o">=</span> <span class="n">df_merged</span><span class="p">[</span><span class="s2">&quot;outlier_knn&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Jumlah outlier: </span><span class="si">{</span><span class="n">num_outliers</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Cetak data outlier</span>
<span class="n">outliers</span> <span class="o">=</span> <span class="n">df_merged</span><span class="p">[</span><span class="n">df_merged</span><span class="p">[</span><span class="s2">&quot;outlier_knn&quot;</span><span class="p">]]</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Data Outlier:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">outliers</span><span class="o">.</span><span class="n">to_string</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>

<span class="c1"># Visualisasi outlier berdasarkan K-NN</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="n">df_merged</span><span class="p">[</span><span class="s2">&quot;sepal_length&quot;</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="n">df_merged</span><span class="p">[</span><span class="s2">&quot;sepal_width&quot;</span><span class="p">],</span>
    <span class="n">hue</span><span class="o">=</span><span class="n">df_merged</span><span class="p">[</span><span class="s2">&quot;outlier_knn&quot;</span><span class="p">],</span> <span class="n">palette</span><span class="o">=</span><span class="p">{</span><span class="kc">False</span><span class="p">:</span> <span class="s2">&quot;blue&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">:</span> <span class="s2">&quot;red&quot;</span><span class="p">}</span>
<span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Outlier Detection (Sepal) - KNN&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="n">df_merged</span><span class="p">[</span><span class="s2">&quot;petal_length&quot;</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="n">df_merged</span><span class="p">[</span><span class="s2">&quot;petal_width&quot;</span><span class="p">],</span>
    <span class="n">hue</span><span class="o">=</span><span class="n">df_merged</span><span class="p">[</span><span class="s2">&quot;outlier_knn&quot;</span><span class="p">],</span> <span class="n">palette</span><span class="o">=</span><span class="p">{</span><span class="kc">False</span><span class="p">:</span> <span class="s2">&quot;blue&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">:</span> <span class="s2">&quot;red&quot;</span><span class="p">}</span>
<span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Outlier Detection (Petal) - KNN&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> id           class  petal_length  petal_width  sepal_length  sepal_width  knn_distance  outlier_knn
  1     Iris-setosa          15.6         32.4          20.3         25.7     28.563088         True
  2     Iris-setosa          14.0          2.0          40.9         30.0     39.035369         True
  3     Iris-setosa           1.3          0.2           4.7          3.2      0.264575        False
  4     Iris-setosa           1.5          0.2           4.6          3.1      0.264575        False
  5     Iris-setosa           1.4          0.2           5.0          3.6      0.244949        False
  6     Iris-setosa           1.7          0.4           5.4          3.9      0.374166        False
  7     Iris-setosa           1.4          0.3           4.6          3.4      0.316228        False
  8     Iris-setosa           1.5          0.2           5.0          3.4      0.223607        False
  9     Iris-setosa           1.4          0.2           4.4          2.9      0.346410        False
 10     Iris-setosa          24.2         13.4          33.2         24.1     25.378140         True
 11     Iris-setosa           1.5          0.2           5.4          3.7      0.331662        False
 12     Iris-setosa           1.6          0.2           4.8          3.4      0.300000        False
 13     Iris-setosa           1.4          0.1           4.8          3.0      0.244949        False
 14     Iris-setosa           1.1          0.1           4.3          3.0      0.479583        False
 15     Iris-setosa           1.2          0.2           5.8          4.0      0.556776        False
 16     Iris-setosa           1.5          0.4           5.7          4.4      0.616441        False
 17     Iris-setosa           1.3          0.4           5.4          3.9      0.400000        False
 18     Iris-setosa           1.4          0.3           5.1          3.5      0.173205        False
 19     Iris-setosa           1.7          0.3           5.7          3.8      0.509902        False
 20     Iris-setosa          21.3         13.1          11.4         15.0     22.168672         True
 21     Iris-setosa           1.7          0.2           5.4          3.4      0.360555        False
 22     Iris-setosa           1.5          0.4           5.1          3.7      0.282843        False
 23     Iris-setosa           1.0          0.2           4.6          3.6      0.538516        False
 24     Iris-setosa           1.7          0.5           5.1          3.3      0.387298        False
 25     Iris-setosa           1.9          0.2           4.8          3.4      0.447214        False
 26     Iris-setosa           1.6          0.2           5.0          3.0      0.300000        False
 27     Iris-setosa           1.6          0.4           5.0          3.4      0.264575        False
 28     Iris-setosa           1.5          0.2           5.2          3.5      0.223607        False
 29     Iris-setosa           1.4          0.2           5.2          3.4      0.264575        False
 30     Iris-setosa          48.3         26.7          43.6         14.3     31.014513         True
 31     Iris-setosa           1.6          0.2           4.8          3.1      0.223607        False
 32     Iris-setosa           1.5          0.4           5.4          3.4      0.316228        False
 33     Iris-setosa           1.5          0.1           5.2          4.1      0.458258        False
 34     Iris-setosa           1.4          0.2           5.5          4.2      0.412311        False
 35     Iris-setosa           1.5          0.1           4.9          3.1      0.200000        False
 36     Iris-setosa           1.2          0.2           5.0          3.2      0.346410        False
 37     Iris-setosa           1.3          0.2           5.5          3.5      0.346410        False
 38     Iris-setosa           1.5          0.1           4.9          3.1      0.200000        False
 39     Iris-setosa           1.3          0.2           4.4          3.0      0.300000        False
 40     Iris-setosa          55.8         23.0          33.0         22.7     33.056316         True
 41     Iris-setosa           1.3          0.3           5.0          3.5      0.264575        False
 42     Iris-setosa           1.3          0.3           4.5          2.3      0.781025        False
 43     Iris-setosa           1.3          0.2           4.4          3.2      0.300000        False
 44     Iris-setosa           1.6          0.6           5.0          3.5      0.374166        False
 45     Iris-setosa           1.9          0.4           5.1          3.8      0.479583        False
 46     Iris-setosa           1.4          0.3           4.8          3.0      0.264575        False
 47     Iris-setosa           1.6          0.2           5.1          3.8      0.331662        False
 48     Iris-setosa           1.4          0.2           4.6          3.2      0.223607        False
 49     Iris-setosa           1.5          0.2           5.3          3.7      0.282843        False
 50     Iris-setosa          43.0         25.0          21.4         20.0     27.103690         True
 51 Iris-versicolor           4.7          1.4           7.0          3.2      0.458258        False
 52 Iris-versicolor           4.5          1.5           6.4          3.2      0.374166        False
 53 Iris-versicolor           4.9          1.5           6.9          3.1      0.346410        False
 54 Iris-versicolor           4.0          1.3           5.5          2.3      0.458258        False
 55 Iris-versicolor           4.6          1.5           6.5          2.8      0.374166        False
 56 Iris-versicolor           4.5          1.3           5.7          2.8      0.331662        False
 57 Iris-versicolor           4.7          1.6           6.3          3.3      0.458258        False
 58 Iris-versicolor           3.3          1.0           4.9          2.4      0.721110        False
 59 Iris-versicolor           4.6          1.3           6.6          2.9      0.316228        False
 60 Iris-versicolor          27.0         44.0          44.0         32.9     29.410882         True
 61 Iris-versicolor           3.5          1.0           5.0          2.0      0.714143        False
 62 Iris-versicolor           4.2          1.5           5.9          3.0      0.374166        False
 63 Iris-versicolor           4.0          1.0           6.0          2.2      0.583095        False
 64 Iris-versicolor           4.7          1.4           6.1          2.9      0.424264        False
 65 Iris-versicolor           3.6          1.3           5.6          2.9      0.583095        False
 66 Iris-versicolor           4.4          1.4           6.7          3.1      0.346410        False
 67 Iris-versicolor           4.5          1.5           5.6          3.0      0.412311        False
 68 Iris-versicolor           4.1          1.0           5.8          2.7      0.387298        False
 69 Iris-versicolor           4.5          1.5           6.2          2.2      0.678233        False
 70 Iris-versicolor          20.5         40.0          26.7         35.0     29.703703         True
 71 Iris-versicolor           4.8          1.8           5.9          3.2      0.424264        False
 72 Iris-versicolor           4.0          1.3           6.1          2.8      0.400000        False
 73 Iris-versicolor           4.9          1.5           6.3          2.5      0.424264        False
 74 Iris-versicolor           4.7          1.2           6.1          2.8      0.435890        False
 75 Iris-versicolor           4.3          1.3           6.4          2.9      0.387298        False
 76 Iris-versicolor           4.4          1.4           6.6          3.0      0.316228        False
 77 Iris-versicolor           4.8          1.4           6.8          2.8      0.374166        False
 78 Iris-versicolor           5.0          1.7           6.7          3.0      0.424264        False
 79 Iris-versicolor           4.5          1.5           6.0          2.9      0.346410        False
 80 Iris-versicolor          32.0         54.0          22.0         16.9     29.410882         True
 81 Iris-versicolor           3.8          1.1           5.5          2.4      0.447214        False
 82 Iris-versicolor           3.7          1.0           5.5          2.4      0.509902        False
 83 Iris-versicolor           3.9          1.2           5.8          2.7      0.374166        False
 84 Iris-versicolor           5.1          1.6           6.0          2.7      0.374166        False
 85 Iris-versicolor           4.5          1.5           5.4          3.0      0.489898        False
 86 Iris-versicolor           4.5          1.6           6.0          3.4      0.469042        False
 87 Iris-versicolor           4.7          1.5           6.7          3.1      0.331662        False
 88 Iris-versicolor           4.4          1.3           6.3          2.3      0.608276        False
 89 Iris-versicolor           4.1          1.3           5.6          3.0      0.374166        False
 90 Iris-versicolor          41.0         62.2          44.0         22.7     36.927903         True
 91 Iris-versicolor           4.4          1.2           5.5          2.6      0.479583        False
 92 Iris-versicolor           4.6          1.4           6.1          3.0      0.346410        False
 93 Iris-versicolor           4.0          1.2           5.8          2.6      0.374166        False
 94 Iris-versicolor           3.3          1.0           5.0          2.3      0.648074        False
 95 Iris-versicolor           4.2          1.3           5.6          2.7      0.316228        False
 96 Iris-versicolor           4.2          1.2           5.7          3.0      0.360555        False
 97 Iris-versicolor           4.2          1.3           5.7          2.9      0.300000        False
 98 Iris-versicolor           4.3          1.3           6.2          2.9      0.346410        False
 99 Iris-versicolor           3.0          1.1           5.1          2.5      0.818535        False
100 Iris-versicolor          43.0         27.6          44.7         33.6     27.103690         True
101  Iris-virginica           6.0          2.5           6.3          3.3      0.556776        False
102  Iris-virginica           5.1          1.9           5.8          2.7      0.331662        False
103  Iris-virginica           5.9          2.1           7.1          3.0      0.458258        False
104  Iris-virginica           5.6          1.8           6.3          2.9      0.387298        False
105  Iris-virginica           5.8          2.2           6.5          3.0      0.387298        False
106  Iris-virginica           6.6          2.1           7.6          3.0      0.547723        False
107  Iris-virginica           4.5          1.7           4.9          2.5      0.883176        False
108  Iris-virginica           6.3          1.8           7.3          2.9      0.547723        False
109  Iris-virginica           5.8          1.8           6.7          2.5      0.616441        False
110  Iris-virginica           6.1          2.5           7.2          3.6      0.754983        False
111  Iris-virginica           5.1          2.0           6.5          3.2      0.424264        False
112  Iris-virginica           5.3          1.9           6.4          2.7      0.387298        False
113  Iris-virginica           5.5          2.1           6.8          3.0      0.374166        False
114  Iris-virginica           5.0          2.0           5.7          2.5      0.519615        False
115  Iris-virginica           5.1          2.4           5.8          2.8      0.519615        False
116  Iris-virginica           5.3          2.3           6.4          3.2      0.387298        False
117  Iris-virginica           5.5          1.8           6.5          3.0      0.387298        False
118  Iris-virginica           6.7          2.2           7.7          3.8      1.004988        False
119  Iris-virginica           6.9          2.3           7.7          2.6      0.927362        False
120  Iris-virginica           5.0          1.5           6.0          2.2      0.583095        False
121  Iris-virginica           5.7          2.3           6.9          3.2      0.300000        False
122  Iris-virginica           4.9          2.0           5.6          2.8      0.458258        False
123  Iris-virginica           6.7          2.0           7.7          2.8      0.678233        False
124  Iris-virginica           4.9          1.8           6.3          2.7      0.360555        False
125  Iris-virginica           5.7          2.1           6.7          3.3      0.374166        False
126  Iris-virginica           6.0          1.8           7.2          3.2      0.469042        False
127  Iris-virginica           4.8          1.8           6.2          2.8      0.387298        False
128  Iris-virginica           4.9          1.8           6.1          3.0      0.300000        False
129  Iris-virginica           5.6          2.1           6.4          2.8      0.374166        False
130  Iris-virginica           5.8          1.6           7.2          3.0      0.556776        False
131  Iris-virginica           6.1          1.9           7.4          2.8      0.509902        False
132  Iris-virginica           6.4          2.0           7.9          3.8      0.932738        False
133  Iris-virginica           5.6          2.2           6.4          2.8      0.435890        False
134  Iris-virginica           5.1          1.5           6.3          2.8      0.435890        False
135  Iris-virginica           5.6          1.4           6.1          2.6      0.663325        False
136  Iris-virginica           6.1          2.3           7.7          3.0      0.678233        False
137  Iris-virginica           5.6          2.4           6.3          3.4      0.435890        False
138  Iris-virginica           5.5          1.8           6.4          3.1      0.435890        False
139  Iris-virginica           4.8          1.8           6.0          3.0      0.316228        False
140  Iris-virginica           5.4          2.1           6.9          3.1      0.374166        False
141  Iris-virginica           5.6          2.4           6.7          3.1      0.346410        False
142  Iris-virginica           5.1          2.3           6.9          3.1      0.509902        False
143  Iris-virginica           5.1          1.9           5.8          2.7      0.331662        False
144  Iris-virginica           5.9          2.3           6.8          3.2      0.346410        False
145  Iris-virginica           5.7          2.5           6.7          3.3      0.400000        False
146  Iris-virginica           5.2          2.3           6.7          3.0      0.374166        False
147  Iris-virginica           5.0          1.9           6.3          2.5      0.412311        False
148  Iris-virginica           5.2          2.0           6.5          3.0      0.360555        False
149  Iris-virginica           5.4          2.3           6.2          3.4      0.616441        False
150  Iris-virginica           5.1          1.8           5.9          3.0      0.331662        False

Jumlah outlier: 12

Data Outlier:
 id           class  petal_length  petal_width  sepal_length  sepal_width  knn_distance  outlier_knn
  1     Iris-setosa          15.6         32.4          20.3         25.7     28.563088         True
  2     Iris-setosa          14.0          2.0          40.9         30.0     39.035369         True
 10     Iris-setosa          24.2         13.4          33.2         24.1     25.378140         True
 20     Iris-setosa          21.3         13.1          11.4         15.0     22.168672         True
 30     Iris-setosa          48.3         26.7          43.6         14.3     31.014513         True
 40     Iris-setosa          55.8         23.0          33.0         22.7     33.056316         True
 50     Iris-setosa          43.0         25.0          21.4         20.0     27.103690         True
 60 Iris-versicolor          27.0         44.0          44.0         32.9     29.410882         True
 70 Iris-versicolor          20.5         40.0          26.7         35.0     29.703703         True
 80 Iris-versicolor          32.0         54.0          22.0         16.9     29.410882         True
 90 Iris-versicolor          41.0         62.2          44.0         22.7     36.927903         True
100 Iris-versicolor          43.0         27.6          44.7         33.6     27.103690         True
</pre></div>
</div>
<img alt="_images/a179e9edd444fb176d282cd0c2ba16384edb3d1f74472230b652a99c315a87aa.png" src="_images/a179e9edd444fb176d282cd0c2ba16384edb3d1f74472230b652a99c315a87aa.png" />
<img alt="_images/9eac05919269f4b2d756785663e967fc65e71e75591637ebbb1e74003d5998f9.png" src="_images/9eac05919269f4b2d756785663e967fc65e71e75591637ebbb1e74003d5998f9.png" />
</div>
</div>
</section>
</section>
<section id="deteksi-outlier-dengan-metode-local-outlier-factor-lof-dalam-data-understanding">
<h2><strong>Deteksi Outlier dengan metode Local Outlier Factor (LOF) dalam Data Understanding</strong><a class="headerlink" href="#deteksi-outlier-dengan-metode-local-outlier-factor-lof-dalam-data-understanding" title="Link to this heading">#</a></h2>
<section id="apa-itu-lof">
<h3>APA ITU LOF<a class="headerlink" href="#apa-itu-lof" title="Link to this heading">#</a></h3>
<p>Local Outlier Factor, disingkat LOF adalah algoritme untuk mencari titik-titik data yang menyimpang (anomali) dengan mengukur simpangan setempat tiap titik data terhadap para tetangganya. Algoritma ini diusulkan oleh Markus M. Breunig, Hans-Peter Kriegel, Raymond T. Ng, dan Jörg Sander pada tahun 2000.
LOF menggunakan konsep yang sama dengan DBSCAN dan OPTICS, yaitu konsep “jarak inti” dan “jarak keterjangkauan” yang sering dipakai dalam perkiraan kerapatan setempat.</p>
</section>
<section id="bagaimana-tahapan-lof">
<h3>BAGAIMANA TAHAPAN LOF<a class="headerlink" href="#bagaimana-tahapan-lof" title="Link to this heading">#</a></h3>
<p>Tahapan dari metode <strong>Local Outlier Factor (LOF)</strong> dalam mendeteksi outlier adalah sebagai berikut:</p>
<ol class="arabic simple">
<li><p><strong>Tentukan Jumlah Tetangga (k):</strong>
Tentukan jumlah tetangga terdekat (k) yang akan digunakan untuk perhitungan kepadatan lokal. Misalnya, <code class="docutils literal notranslate"><span class="pre">n_neighbors=90</span></code> yang berarti setiap titik akan dibandingkan dengan 90 tetangga terdekatnya.</p></li>
<li><p><strong>Hitung Jarak K-Tetangga Terdekat:</strong>
Untuk setiap titik data, hitung jarak ke k tetangga terdekat. Jarak ini digunakan untuk menentukan kepadatan lokal titik data tersebut.</p></li>
<li><p><strong>Hitung Kepadatan Lokal:</strong>
Hitung kepadatan lokal setiap titik data dengan melihat seberapa rapat titik tersebut dengan tetangganya dibandingkan dengan tetangga lainnya. Titik dengan kepadatan rendah lebih cenderung dianggap outlier.</p></li>
<li><p><strong>Hitung LOF (Local Outlier Factor):</strong>
Hitung rasio antara kepadatan lokal titik data terhadap kepadatan lokal tetangganya. Rasio ini disebut <strong>LOF</strong>. Titik dengan LOF yang lebih tinggi menunjukkan bahwa titik tersebut lebih terisolasi atau lebih tidak padat dibandingkan tetangganya, yang mengindikasikan bahwa titik tersebut adalah outlier.</p></li>
<li><p><strong>Penetapan Outlier:</strong>
Tentukan titik yang memiliki LOF lebih besar dari ambang batas tertentu sebagai outlier. Biasanya, titik dengan LOF lebih besar dari 1 dianggap outlier, karena menunjukkan bahwa titik tersebut lebih jarang ditemukan di daerah tersebut dibandingkan dengan tetangganya.</p></li>
<li><p><strong>Hasil Prediksi:</strong>
Setiap titik data diberi label -1 jika dianggap outlier dan 1 jika dianggap normal.</p></li>
</ol>
</section>
<section id="contoh-menghitung-manual-lof">
<h3>CONTOH MENGHITUNG MANUAL LOF<a class="headerlink" href="#contoh-menghitung-manual-lof" title="Link to this heading">#</a></h3>
<p>Berikut adalah cara singkat menghitung <strong>Local Outlier Factor (LOF)</strong> untuk satu titik data dengan dua fitur:</p>
<ol class="arabic simple">
<li><p><strong>Dataset</strong>:<br />
Misalkan data berikut:</p></li>
</ol>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>ID</p></th>
<th class="head"><p>Feature1</p></th>
<th class="head"><p>Feature2</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>2.0</p></td>
<td><p>3.0</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>3.5</p></td>
<td><p>4.5</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>5.0</p></td>
<td><p>6.0</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>6.5</p></td>
<td><p>7.5</p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>8.0</p></td>
<td><p>9.0</p></td>
</tr>
<tr class="row-odd"><td><p>6</p></td>
<td><p>9.5</p></td>
<td><p>10.5</p></td>
</tr>
<tr class="row-even"><td><p>7</p></td>
<td><p>11.0</p></td>
<td><p>12.0</p></td>
</tr>
<tr class="row-odd"><td><p>8</p></td>
<td><p>12.5</p></td>
<td><p>13.5</p></td>
</tr>
<tr class="row-even"><td><p>9</p></td>
<td><p>14.0</p></td>
<td><p>15.0</p></td>
</tr>
<tr class="row-odd"><td><p>10</p></td>
<td><p>20.0</p></td>
<td><p>25.0</p></td>
</tr>
</tbody>
</table>
</div>
<p>Kita akan hitung LOF untuk <strong>titik 5</strong> (8.0, 9.0).</p>
<ol class="arabic simple" start="2">
<li><p><strong>Hitung Jarak Euclidean</strong>:<br />
Jarak antara titik 5 dan titik lainnya:</p>
<ul class="simple">
<li><p>Titik 5 ke Titik 4: 2.12</p></li>
<li><p>Titik 5 ke Titik 6: 2.12</p></li>
</ul>
</li>
<li><p><strong>Tentukan k-Tetangga Terdekat</strong> (k=2):<br />
Titik 5 memiliki dua tetangga terdekat: titik 4 dan titik 6.</p></li>
<li><p><strong>Hitung Reachability Distance</strong>:<br />
Reachability distance antara titik 5 dan tetangga:</p>
<ul class="simple">
<li><p>Titik 5 ke Titik 4: 2.12</p></li>
<li><p>Titik 5 ke Titik 6: 2.12</p></li>
</ul>
</li>
<li><p><strong>Hitung Local Reachability Density (LRD)</strong>:<br />
<span class="math notranslate nohighlight">\(\text{LRD}(5) = \frac{1}{\frac{1}{2} \times (2.12 + 2.12)} = 0.47\)</span></p></li>
<li><p><strong>Hitung LOF</strong>:<br />
<span class="math notranslate nohighlight">\(\text{LOF}(5) = \frac{0.47}{0.47} + \frac{0.47}{0.47} = 2\)</span></p></li>
<li><p><strong>Interpretasi</strong>:<br />
Karena <strong>LOF = 2</strong> (lebih besar dari 1), titik 5 dianggap <strong>outlier</strong>.</p></li>
</ol>
<p>LOF mengukur seberapa terisolasi titik dibandingkan tetangganya. Titik dengan LOF lebih besar dari 1 dianggap outlier.</p>
</section>
<section id="implementasi-pakai-sklearn-untuk-data-contoh">
<h3>IMPLEMENTASI PAKAI SKLEARN UNTUK DATA CONTOH<a class="headerlink" href="#implementasi-pakai-sklearn-untuk-data-contoh" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">sklearn.neighbors</span> <span class="kn">import</span> <span class="n">LocalOutlierFactor</span>

<span class="c1"># Dataset contoh</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;ID&#39;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">)),</span>  <span class="c1"># Menambahkan ID dari 1 hingga 10</span>
    <span class="s1">&#39;Feature1&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.5</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">,</span> <span class="mf">6.5</span><span class="p">,</span> <span class="mf">8.0</span><span class="p">,</span> <span class="mf">9.5</span><span class="p">,</span> <span class="mf">11.0</span><span class="p">,</span> <span class="mf">12.5</span><span class="p">,</span> <span class="mf">14.0</span><span class="p">,</span> <span class="mf">20.0</span><span class="p">],</span>
    <span class="s1">&#39;Feature2&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">3.0</span><span class="p">,</span> <span class="mf">4.5</span><span class="p">,</span> <span class="mf">6.0</span><span class="p">,</span> <span class="mf">7.5</span><span class="p">,</span> <span class="mf">9.0</span><span class="p">,</span> <span class="mf">10.5</span><span class="p">,</span> <span class="mf">12.0</span><span class="p">,</span> <span class="mf">13.5</span><span class="p">,</span> <span class="mf">15.0</span><span class="p">,</span> <span class="mf">25.0</span><span class="p">]</span>
<span class="p">}</span>

<span class="c1"># Membuat DataFrame</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

<span class="c1"># Inisialisasi model LOF dengan k=2 (2 tetangga terdekat)</span>
<span class="n">lof</span> <span class="o">=</span> <span class="n">LocalOutlierFactor</span><span class="p">(</span><span class="n">n_neighbors</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="c1"># Fit model LOF dan prediksi label (1 untuk normal, -1 untuk outlier)</span>
<span class="n">lof_labels</span> <span class="o">=</span> <span class="n">lof</span><span class="o">.</span><span class="n">fit_predict</span><span class="p">(</span><span class="n">df</span><span class="p">[[</span><span class="s1">&#39;Feature1&#39;</span><span class="p">,</span> <span class="s1">&#39;Feature2&#39;</span><span class="p">]])</span>

<span class="c1"># Menambahkan hasil prediksi ke DataFrame</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;LOF Label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">lof_labels</span>

<span class="c1"># Menampilkan hasil</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

<span class="c1"># Menampilkan jumlah outlier</span>
<span class="n">num_outliers</span> <span class="o">=</span> <span class="p">(</span><span class="n">lof_labels</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Jumlah outlier: </span><span class="si">{</span><span class="n">num_outliers</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Menampilkan data outlier</span>
<span class="n">outliers</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;LOF Label&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Data Outlier:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">outliers</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>   ID  Feature1  Feature2  LOF Label
0   1       2.0       3.0          1
1   2       3.5       4.5          1
2   3       5.0       6.0          1
3   4       6.5       7.5          1
4   5       8.0       9.0          1
5   6       9.5      10.5          1
6   7      11.0      12.0          1
7   8      12.5      13.5          1
8   9      14.0      15.0          1
9  10      20.0      25.0         -1

Jumlah outlier: 1

Data Outlier:
   ID  Feature1  Feature2  LOF Label
9  10      20.0      25.0         -1
</pre></div>
</div>
</div>
</div>
</section>
</section>
<div class="toctree-wrapper compound">
</div>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="tugas1.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Data Understanding</p>
      </div>
    </a>
    <a class="right-next"
       href="AKURASI.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Penjelasan Deteksi Outlier</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#penjelasan-deteksi-outlier">Penjelasan Deteksi Outlier</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#identifikasi-outlier-menggunakan-k-nearest-neighbors-knn-dalam-pemahaman-data">Identifikasi Outlier Menggunakan K-Nearest Neighbors (KNN) dalam Pemahaman Data</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#deteksi-outlier-dengan-metode-local-outlier-factor-lof-dalam-data-understanding"><strong>Deteksi Outlier dengan metode Local Outlier Factor (LOF) dalam Data Understanding</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#apa-itu-lof">APA ITU LOF</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bagaimana-tahapan-lof">BAGAIMANA TAHAPAN LOF</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#contoh-menghitung-manual-lof">CONTOH MENGHITUNG MANUAL LOF</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#implementasi-pakai-sklearn-untuk-data-contoh">IMPLEMENTASI PAKAI SKLEARN UNTUK DATA CONTOH</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Muhammad Anugrah Supriyandi
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2025.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>